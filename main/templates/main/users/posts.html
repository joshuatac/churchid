
<div class="bg-white p-10 rounded-2xl shadow">
    {% if type == "view" %}


        <div>
            
            {% if post %}

                <div>
                    <a href="{% url "posts" 'view' %}" class="bg-zinc-400 px-4 py-3 rounded  inline-block font-medium cursor-pointer text-white mb-10" >
                        <span>Back</span>
                    </a>


                    <div class="container  max-w-3xl">
                        <div class="post-image h-96 w-full mb-3">
                            {% if post.image_url %}
                                <img src="{{post.image_url}}" alt="{{post.title}}">
                            
                            {% else %}
                                <div class="flex justify-center items-center h-full w-full bg-black/35">
                                    <span class="font-bold text-3xl text-white">{{ post.category}} </span>
                                </div>
                            
                            {% endif %}
                        </div>
                        <div class="flex justify-between items-center mt-5 gap-4">
                            <div class="text-xs"> <span class="font-bold">Posted:</span> {{post.created_at}}</div>
                            <div class="text-xs"> <span class="font-bold">Updated:</span> {{post.updated_at}}</div>
                            
                        </div>

                        <h1 class="text-3xl font-bold my-5">{{post.title}}</h1>
                        <p class="">{{post.content}}</p>

                        {% if request.user.is_staff %}
                            <div class="flex justify-between items-center mt-10">
                                <a href="{% url "posts" 'edit' %}?id={{post.id}}" class="btn w-[10rem]">Edit</a>
                                
                            
                                <a href="{% url "posts" 'delete' %}?id={{post.id}}" class="p-3 text-center rounded border border-red-400 text-red-500 hover:bg-red-100 transition cursor-pointer w-[10rem]">Delete</a>
                        
                    
                            </div>
                        {% endif %}

                    </div>

                </div>
            
            {% else %}
            
            {% if request.user.is_staff %}
                <a href="{% url "posts" 'add' %}" class="btn  inline-block mb-10">
                    <div class=" flex items-center gap-2">
                        <span>New Post</span>
                        <i class="fa fa-plus"></i>
                    </div>
                </a>
            
            {% endif %}
                <div class="grid grid-cols-1 lg:grid-cols-3  gap-10">

                    {% for post in posts %}
                        <div class="post shadow-md border border-gray-200 p-5 rounded">
                            <div class="post-image h-64 w-full mb-3">
                                {% if post.image_url %}
                                    <img src="{{post.image_url}}" alt="{{post.title}}">
                                
                                {% else %}
                                    <div class="flex justify-center items-center h-full w-full bg-black/35">
                                        <span class="font-bold text-3xl text-white">{{ post.category}} </span>
                                    </div>
                                
                                {% endif %}
                            </div>

                            <h1 class="text-2xl font-medium mb-2">{{post.title}}</h1>
                            <p>{{post.content | truncatechars:60}}</p>

                            <div class="flex justify-end items-center mt-5 gap-4">
                                <div>
                                    <div class="text-xs mb-2">{{post.created_at}}</div>
                                    {% if post.category == "TESTIMONY"  %}
                                        <div class="text-xs  bg-primary-100 py-1 px-4 rounded-3xl">{{post.category}}</div>
                                    
                                    {% elif post.category == "NEWS" %}
                                        <div class="text-xs  bg-primary-200 py-1 px-4 rounded-3xl">{{post.category}}</div>

                                    {% elif post.category == "SERMON"  %}
                                        <div class="text-xs  bg-primary-300 py-1 px-4 rounded-3xl">{{post.category}}</div>

                                    {% else %}
                                        <div class="text-xs  bg-blue-400 py-1 px-4 rounded-3xl">{{post.category}}</div>

                                    {% endif %}
                                </div>
                                <a href="{% url "posts" 'view' %}?id={{post.id}}" class="btn bg-primary-300 inline-block ml-auto " >
                                    <span>Read More</span>
                                    <i class="fa-solid fa-arrow-right"></i>
                                </a>
                            </div>
                        </div>

                    {% empty %}
                        <p>No post yet</p>
                    {% endfor %}
                    
                </div>
            
            {% endif %}


        </div>



    {% else %}

    <div class="container">

        {% if type == 'edit' %}
            <a href="{% url "posts" 'view' %}?id={{id}}" class="bg-zinc-400 px-4 py-3 rounded  inline-block font-medium cursor-pointer text-white mb-10" >
                <span>Back</span>
            </a>    

        {% else %}

            <a href="{% url "posts" 'view' %}" class="bg-zinc-400 px-4 py-3 rounded  inline-block font-medium cursor-pointer text-white mb-10" >
                <span>Back</span>
            </a>    

        {% endif %}

        {% include "includes/form.html" with button_text=button_text %}

    </div>

    {% endif %}

</div>


